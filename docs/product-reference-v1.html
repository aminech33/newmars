<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NewMars v1.0.0 ‚Äî Document de R√©f√©rence Produit</title>
  <meta name="description" content="Document de r√©f√©rence produit officiel de NewMars v1 - P√©rim√®tre fonctionnel complet">
  <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ 
      startOnLoad: true, // Auto-render on page load
      theme: 'dark',
      themeVariables: {
        primaryColor: '#4a9eff',
        primaryTextColor: '#fff',
        primaryBorderColor: '#0078d4',
        lineColor: '#9d9d9d',
        secondaryColor: '#6ccb5f',
        tertiaryColor: '#ffc83d',
        background: '#2d2d2d',
        mainBkg: '#2d2d2d',
        secondBkg: '#242424',
        textColor: '#e8e8e8',
        fontSize: '13px'
      }
    });
  </script>
  <style>
    /* Dark mode only */
    :root {
      --primary: #4a9eff;
      --primary-dark: #0078d4;
      --primary-light: #1e3a5f;
      --success: #6ccb5f;
      --success-light: #1a3d1a;
      --warning: #ffc83d;
      --warning-light: #3d3020;
      --info: #b392f0;
      --info-light: #2e2540;
      --danger: #f85149;
      --danger-light: #3d1e1d;
      --gray-50: #1c1c1c;
      --gray-100: #242424;
      --gray-200: #2d2d2d;
      --gray-300: #404040;
      --gray-400: #6e6e6e;
      --gray-500: #9d9d9d;
      --gray-600: #d4d4d4;
      --gray-700: #e8e8e8;
      --white: #ffffff;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.4);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.5);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gray-100);
      color: var(--gray-600);
      line-height: 1.6;
    }

    /* Search bar in header */
    .search-box {
      position: relative;
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 6px;
      padding: 6px 12px;
      gap: 8px;
      min-width: 280px;
      max-width: 400px;
      transition: all 0.3s;
      border: 1px solid transparent;
    }

    .search-box:focus-within {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .search-icon {
      color: rgba(255, 255, 255, 0.7);
      font-size: 16px;
    }

    #searchInput {
      border: none;
      background: transparent;
      color: white;
      font-size: 13px;
      outline: none;
      flex: 1;
      padding: 2px 0;
    }

    #searchInput::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    .search-clear {
      cursor: pointer;
      color: rgba(255, 255, 255, 0.6);
      font-size: 16px;
      display: none;
    }

    .search-clear.visible {
      display: block;
    }

    .search-results {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      right: 0;
      background: var(--gray-200);
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
      max-height: 400px;
      overflow-y: auto;
      display: none;
      z-index: 1000;
    }

    .search-results.visible {
      display: block;
    }

    .search-result-item {
      padding: 12px 16px;
      border-bottom: 1px solid var(--gray-200);
      cursor: pointer;
      transition: background 0.2s;
    }

    .search-result-item:hover {
      background: var(--gray-50);
    }

    .search-result-item:last-child {
      border-bottom: none;
    }

    .search-result-title {
      font-weight: 600;
      color: var(--primary);
      font-size: 14px;
      margin-bottom: 4px;
    }

    .search-result-context {
      font-size: 13px;
      color: var(--gray-500);
      line-height: 1.4;
    }

    .search-highlight {
      background: var(--warning);
      color: var(--gray-700);
      padding: 2px 4px;
      border-radius: 2px;
      font-weight: 500;
    }

    /* Header SharePoint style */
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: var(--shadow-lg);
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      min-height: 50px;
      gap: 20px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 24px;
      flex: 1;
      min-width: 0;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      font-weight: 600;
      white-space: nowrap;
    }

    .logo-icon {
      width: 28px;
      height: 28px;
      background: rgba(255,255,255,0.2);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .header-title-inline {
      font-size: 16px;
      font-weight: 600;
      opacity: 0.95;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .header-meta {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 11px;
      opacity: 0.85;
    }

    .header-meta span {
      display: flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    /* Hide header-title and nav-tabs - keep only one line */
    .header-title {
      display: none;
    }

    .nav-tabs {
      display: none;
    }

    /* Main layout */
    .main-container {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
      gap: 24px;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      flex-shrink: 0;
      position: sticky;
      top: 70px;
      height: fit-content;
    }

    .sidebar-card {
      background: var(--gray-200);
      border-radius: 8px;
      box-shadow: var(--shadow-sm);
      overflow: hidden;
    }

    .sidebar-header {
      padding: 16px 20px;
      background: var(--gray-50);
      border-bottom: 1px solid var(--gray-200);
      font-weight: 600;
      font-size: 14px;
      color: var(--gray-600);
    }

    .sidebar-nav {
      padding: 8px 0;
    }

    

    

    

    .sidebar-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    /* Content */
    .content {
      flex: 1;
      min-width: 0;
    }

    .content-card {
      background: var(--gray-200);
      border-radius: 8px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 24px;
      overflow: hidden;
    }

    .content-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .content-header h2 {
      font-size: 18px;
      font-weight: 600;
      color: var(--gray-700);
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .content-header h2 .icon {
      font-size: 24px;
    }

    .content-body {
      padding: 24px;
    }

    /* Status badges */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }

    .badge-success {
      background: var(--success-light);
      color: var(--success);
    }

    .badge-warning {
      background: var(--warning-light);
      color: #8a6d00;
    }

    .badge-info {
      background: var(--info-light);
      color: var(--info);
    }

    .badge-danger {
      background: var(--danger-light);
      color: var(--danger);
    }

    /* Legend */
    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      padding: 16px 24px;
      background: var(--gray-50);
      border-radius: 8px;
      margin-bottom: 24px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    /* Module Flow Diagram */
    .flow-diagram {
      padding: 32px;
      background: linear-gradient(180deg, var(--gray-50) 0%, white 100%);
      border-radius: 12px;
      margin-bottom: 32px;
    }

    .flow-title {
      text-align: center;
      font-size: 16px;
      font-weight: 600;
      color: var(--gray-600);
      margin-bottom: 32px;
    }

    .flow-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .flow-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .flow-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 16px 24px;
      background: var(--gray-200);
      border: 2px solid var(--gray-300);
      border-radius: 12px;
      min-width: 120px;
      text-align: center;
      transition: all 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }

    .flow-node:hover {
      border-color: var(--primary);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .flow-node.hub {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border-color: var(--primary);
    }

    .flow-node-icon {
      font-size: 28px;
    }

    .flow-node-label {
      font-size: 13px;
      font-weight: 600;
    }

    .flow-node-status {
      font-size: 11px;
      opacity: 0.8;
    }

    .flow-arrow {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: var(--gray-400);
    }

    .flow-arrow-down {
      font-size: 24px;
    }

    .flow-arrow-right {
      font-size: 20px;
      color: var(--gray-300);
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(4px); }
    }

    .flow-branches {
      display: flex;
      justify-content: center;
      gap: 16px;
      position: relative;
    }

    .flow-branches::before {
      content: '';
      position: absolute;
      top: -16px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 2px;
      background: var(--gray-300);
    }

    .flow-branch {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .flow-branch::before {
      content: '';
      width: 2px;
      height: 16px;
      background: var(--gray-300);
    }

    /* Feature tables */
    .feature-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .feature-table th {
      text-align: left;
      padding: 12px 16px;
      background: var(--gray-50);
      border-bottom: 2px solid var(--gray-200);
      font-weight: 600;
      color: var(--gray-600);
    }

    .feature-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--gray-200);
      vertical-align: top;
    }

    .feature-table tr:hover {
      background: var(--gray-50);
    }

    .feature-table tr:last-child td {
      border-bottom: none;
    }

    .feature-name {
      font-weight: 500;
      color: var(--gray-700);
    }

    .feature-desc {
      color: var(--gray-500);
      font-size: 13px;
    }

    /* Module cards grid */
    .modules-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .module-card {
      background: var(--gray-200);
      border-radius: 12px;
      border: 1px solid var(--gray-300);
      padding: 24px;
      transition: all 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }

    .module-card:hover {
      border-color: var(--primary);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .module-card-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }

    .module-card-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .module-card-icon.hub { background: var(--primary-light); }
    .module-card-icon.tasks { background: #e3f2fd; }
    .module-card-icon.journal { background: #fff3e0; }
    .module-card-icon.health { background: #e8f5e9; }
    .module-card-icon.learning { background: #f3e5f5; }
    .module-card-icon.pomodoro { background: #ffebee; }
    .module-card-icon.library { background: #e0f2f1; }
    .module-card-icon.dashboard { background: #e8eaf6; }
    .module-card-icon.settings { background: var(--gray-100); }

    .module-card-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--gray-700);
    }

    .module-card-subtitle {
      font-size: 12px;
      color: var(--gray-400);
    }

    .module-card-desc {
      font-size: 14px;
      color: var(--gray-500);
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .module-card-stats {
      display: flex;
      gap: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--gray-200);
    }

    .module-card-stat {
      display: flex;
      flex-direction: column;
    }

    .module-card-stat-value {
      font-size: 18px;
      font-weight: 600;
      color: var(--primary);
    }

    .module-card-stat-label {
      font-size: 11px;
      color: var(--gray-400);
      text-transform: uppercase;
    }

    /* Exclusions list */
    .exclusions {
      background: var(--gray-50);
      border-radius: 8px;
      padding: 16px 20px;
      margin-top: 16px;
    }

    .exclusions-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--gray-500);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .exclusions-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .exclusion-item {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      background: var(--gray-300);
      border: 1px solid var(--gray-400);
      border-radius: 4px;
      font-size: 12px;
      color: var(--gray-600);
    }

    /* Architecture diagram */
    .arch-diagram {
      display: flex;
      flex-direction: column;
      gap: 24px;
      padding: 24px;
      background: var(--gray-50);
      border-radius: 12px;
    }

    .arch-layer {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .arch-layer-label {
      width: 100px;
      font-size: 12px;
      font-weight: 600;
      color: var(--gray-500);
      text-transform: uppercase;
    }

    .arch-layer-content {
      flex: 1;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .arch-box {
      padding: 12px 20px;
      background: var(--gray-200);
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
    }

    .arch-box.primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .arch-arrow {
      display: flex;
      justify-content: center;
      color: var(--gray-400);
      font-size: 20px;
    }

    /* Summary table */
    .summary-table {
      width: 100%;
      border-collapse: collapse;
    }

    .summary-table th,
    .summary-table td {
      padding: 16px;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    .summary-table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
    }

    .summary-table th:first-child {
      border-radius: 8px 0 0 0;
    }

    .summary-table th:last-child {
      border-radius: 0 8px 0 0;
    }

    .summary-table tr:hover {
      background: var(--gray-50);
    }

    .summary-module {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .summary-module-icon {
      font-size: 20px;
    }

    /* Progress bar */
    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--gray-200);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-bar-fill {
      height: 100%;
      background: var(--success);
      border-radius: 4px;
      transition: width 0.3s;
    }

    /* Footer */
    .footer {
      background: var(--gray-700);
      color: var(--gray-400);
      padding: 32px;
      text-align: center;
      margin-top: 48px;
    }

    .footer-content {
      max-width: 600px;
      margin: 0 auto;
    }

    .footer-title {
      color: white;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .footer-text {
      font-size: 13px;
      line-height: 1.6;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .sidebar {
        position: fixed;
        left: -300px;
        top: 0;
        height: 100vh;
        z-index: 300;
        transition: left 0.3s;
        background: var(--gray-100);
        padding-top: 80px;
      }

      .sidebar.open {
        left: 0;
      }

      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 250;
        display: none;
      }

      .sidebar-overlay.visible {
        display: block;
      }

      .hamburger-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 350;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        width: 50px;
        height: 50px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: transform 0.2s;
      }

      .hamburger-menu:hover {
        transform: scale(1.05);
      }

      .hamburger-line {
        width: 24px;
        height: 3px;
        background: white;
        border-radius: 2px;
        transition: all 0.3s;
      }

      .hamburger-menu.open .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translateY(10px);
      }

      .hamburger-menu.open .hamburger-line:nth-child(2) {
        opacity: 0;
      }

      .hamburger-menu.open .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translateY(-10px);
      }
      
      .main-container {
        padding: 16px;
      }

      .search-container {
        display: none;
      }

      .header-top {
        flex-wrap: wrap;
        gap: 10px;
      }

      .header-left {
        gap: 12px;
      }

      .header-title-inline {
        display: none;
      }

      .search-box {
        min-width: 100%;
        order: 3;
      }

      .header-right {
        gap: 8px;
      }

      .header-meta span:last-child {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .header-top {
        flex-direction: column;
        gap: 12px;
      }
      
      .header-meta {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .flow-row {
        flex-direction: column;
      }
      
      .flow-arrow-right {
        transform: rotate(90deg);
      }
    }

    /* Section anchors */
    section {
      scroll-margin-top: 70px;
    }

    /* Print styles */
    @media print {
      .header-top, .sidebar, .search-box, .hamburger-menu {
        display: none !important;
      }

      .main-container {
        max-width: 100%;
        padding: 0;
      }

      .content {
        width: 100%;
      }

      .content-card {
        break-inside: avoid;
        box-shadow: none;
        border: 1px solid var(--gray-300);
        page-break-inside: avoid;
      }

      .flow-diagram {
        break-inside: avoid;
      }

      body {
        background: var(--gray-100);
        color: var(--gray-600);
      }

      a {
        color: var(--primary);
        text-decoration: none;
      }

      .badge {
        border: 1px solid currentColor;
      }
    }

    /* Responsive improvements */
    @media (max-width: 768px) {
      .search-container {
        top: 10px;
        right: 10px;
        flex-direction: column;
      }

      .search-box {
        min-width: 200px;
      }
    }

    /* Accessibility improvements */
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* File links styling */
    .file-link {
      color: var(--info);
      text-decoration: none;
      font-family: 'Monaco', 'Courier New', monospace;
      background: var(--info-light);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.9em;
      transition: all 0.2s;
    }

    .file-link:hover {
      background: var(--info);
      color: white;
    }

    /* Version badge */
    .version-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--success-light);
      color: var(--success);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      font-family: monospace;
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Flow chart container */
    /* Flow chart display - visible in main page - IMMERSIVE */
    .flow-chart-display {
      background: var(--gray-100);
      border: 2px solid var(--primary);
      border-radius: 12px;
      padding: 0;
      margin: 32px 0;
      box-shadow: var(--shadow-md);
      height: 600px;
      position: relative;
      overflow: hidden;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flow-chart-display:active {
      cursor: grabbing;
    }

    .flow-chart-display .mermaid {
      position: relative;
      transform-origin: center center;
      transition: none;
      will-change: transform;
    }

    .flow-chart-display svg {
      max-width: none !important;
      max-height: none !important;
      width: auto !important;
      height: auto !important;
      display: block;
    }

    /* Zoom controls overlay */
    .flow-zoom-controls {
      position: absolute;
      bottom: 16px;
      right: 16px;
      display: flex;
      gap: 8px;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px;
      border-radius: 8px;
      z-index: 10;
    }

    .flow-zoom-btn {
      background: var(--gray-300);
      border: none;
      border-radius: 6px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--gray-700);
      font-size: 18px;
      font-weight: bold;
      transition: all 0.2s;
    }

    .flow-zoom-btn:hover {
      background: var(--primary);
      color: white;
      transform: scale(1.1);
    }

    .flow-zoom-level {
      background: var(--gray-300);
      border-radius: 6px;
      padding: 0 12px;
      display: flex;
      align-items: center;
      color: var(--gray-700);
      font-size: 13px;
      font-weight: 600;
      min-width: 60px;
      justify-content: center;
    }

    /* Accordions for feature details */
    .feature-accordion {
      margin: 24px 0;
      border: 1px solid var(--gray-300);
      border-radius: 10px;
      overflow: hidden;
      background: var(--gray-200);
      transition: all 0.3s;
    }

    .feature-accordion:hover:hover {
      border-color: var(--primary);
    }

    .accordion-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 18px 24px;
      background: var(--gray-300);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s;
      font-weight: 600;
      font-size: 16px;
      color: var(--gray-700);
    }

    .accordion-header:hover {
      background: var(--gray-400);
      color: var(--gray-800);
    }

    .accordion-icon {
      font-size: 22px;
    }

    .accordion-title {
      flex: 1;
    }

    .accordion-toggle {
      margin-left: auto;
      transition: transform 0.3s;
      color: var(--gray-600);
      font-size: 18px;
    }

    details[open] .accordion-toggle {
      transform: rotate(180deg);
    }

    .accordion-content {
      padding: 24px;
      background: var(--gray-200);
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Deprecated modal styles removed */
.mermaid {
      background: transparent;
      padding: 20px;
    }

    .mermaid svg {
      max-width: none !important;
      height: auto;
      display: block;
    }
  </style>
</head>
<body>
  <!-- Hamburger Menu (Mobile) -->
  <button class="hamburger-menu" id="hamburgerMenu" aria-label="Menu de navigation" style="display: none;">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <!-- Sidebar Overlay (Mobile) -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-top">
      <div class="header-left">
        <div class="logo">
          <div class="logo-icon">üöÄ</div>
          <span>NewMars</span>
        </div>
        <span class="header-title-inline">Document de R√©f√©rence Produit v1</span>
      </div>
      <div class="header-right">
        <div class="search-box">
          <span class="search-icon" aria-hidden="true">üîç</span>
          <input 
            type="text" 
            id="searchInput" 
            placeholder="Rechercher..." 
            aria-label="Rechercher dans le document"
            autocomplete="off"
          />
          <span class="search-clear" id="searchClear" aria-label="Effacer la recherche">‚úï</span>
          <div class="search-results" id="searchResults" role="listbox"></div>
        </div>
        <div class="header-meta">
          <span class="version-badge">v1.0.0</span>
          <span>‚úÖ Officiel</span>
        </div>
      </div>
    </div>
  </header>

  <div class="main-container">
    <!-- Sidebar -->
    

    <!-- Main Content -->
    <main class="content">
      <!-- Overview Section -->
      <!-- Modules Grid -->
      <section id="modules" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üì¶</span> Modules ‚Äî Vue synth√©tique</h2>
        </div>
        <div class="content-body">
          <div class="modules-grid">
            <!-- Hub -->
            <a href="#hub" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon hub">üè†</div>
                <div>
                  <div class="module-card-title">Hub / Accueil</div>
                  <div class="module-card-subtitle">Point d'entr√©e central</div>
                </div>
              </div>
              <div class="module-card-desc">
                Navigation vers tous les modules avec salutation personnalis√©e contextuelle.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">3</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Tasks -->
            <a href="#tasks" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon tasks">‚úÖ</div>
                <div>
                  <div class="module-card-title">T√¢ches</div>
                  <div class="module-card-subtitle">Gestion temporelle</div>
                </div>
              </div>
              <div class="module-card-desc">
                Organisation en colonnes temporelles avec projets, g√©n√©ration IA et Pomodoro int√©gr√©.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">15+</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Journal -->
            <a href="#journal" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon journal">üìù</div>
                <div>
                  <div class="module-card-title">Journal</div>
                  <div class="module-card-subtitle">R√©flexion quotidienne</div>
                </div>
              </div>
              <div class="module-card-desc">
                Intention du jour, habitudes, humeur et notes libres avec sauvegarde automatique.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">12</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Health -->
            <a href="#health" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon health">üíö</div>
                <div>
                  <div class="module-card-title">Sant√©</div>
                  <div class="module-card-subtitle">Poids & Nutrition</div>
                </div>
              </div>
              <div class="module-card-desc">
                Suivi du poids avec graphique, nutrition avec macros et objectifs personnalis√©s.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">13</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Learning -->
            <a href="#learning" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon learning">üéì</div>
                <div>
                  <div class="module-card-title">Apprentissage</div>
                  <div class="module-card-subtitle">Tuteur IA</div>
                </div>
              </div>
              <div class="module-card-desc">
                Cours avec chat IA (Gemini), streaming des r√©ponses et contexte de code.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">11</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Pomodoro -->
            <a href="#pomodoro" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon pomodoro">üçÖ</div>
                <div>
                  <div class="module-card-title">Pomodoro</div>
                  <div class="module-card-subtitle">Timer de focus</div>
                </div>
              </div>
              <div class="module-card-desc">
                Timer circulaire avec liaisons multiples (t√¢che, projet, livre, cours).
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">14</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Library -->
            <a href="#library" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon library">üìö</div>
                <div>
                  <div class="module-card-title">Biblioth√®que</div>
                  <div class="module-card-subtitle">Suivi de lecture</div>
                </div>
              </div>
              <div class="module-card-desc">
                Gestion des livres, citations, notes et sessions de lecture avec objectif annuel.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">16</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Dashboard -->
            <a href="#dashboard" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon dashboard">üìà</div>
                <div>
                  <div class="module-card-title">Dashboard</div>
                  <div class="module-card-subtitle">Vue d'ensemble</div>
                </div>
              </div>
              <div class="module-card-desc">
                Indicateurs de continuit√©, streaks et corr√©lations statistiques.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">7</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
            
            <!-- Settings -->
            <a href="#settings" class="module-card">
              <div class="module-card-header">
                <div class="module-card-icon settings">‚öôÔ∏è</div>
                <div>
                  <div class="module-card-title">Param√®tres</div>
                  <div class="module-card-subtitle">Configuration</div>
                </div>
              </div>
              <div class="module-card-desc">
                Th√®me, couleur d'accent, export/import des donn√©es et r√©initialisation.
              </div>
              <div class="module-card-stats">
                <div class="module-card-stat">
                  <span class="module-card-stat-value">7</span>
                  <span class="module-card-stat-label">Fonctions</span>
                </div>
                <div class="module-card-stat">
                  <span class="module-card-stat-value">100%</span>
                  <span class="module-card-stat-label">Complet</span>
                </div>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Detailed Modules -->
      
      <!-- Hub -->
      <section id="hub" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üè†</span> Module : Hub / Accueil</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Point d'entr√©e central de l'application, permettant la navigation vers tous les modules.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üè† Hub] --> B[Salutation]
    B --> C{Choisir<br/>module}
    C --> D[‚úÖ T√¢ches]
    C --> E[üìù Journal]
    C --> F[üíö Sant√©]
    C --> G[üéì Apprentissage]
    C --> H[üìö Biblioth√®que]
    C --> I[üìà Dashboard]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style C fill:#ffc83d,stroke:#ffb900,color:#000
    style D fill:#6ccb5f,stroke:#107c10,color:#fff
    style E fill:#6ccb5f,stroke:#107c10,color:#fff
    style F fill:#6ccb5f,stroke:#107c10,color:#fff
    style G fill:#6ccb5f,stroke:#107c10,color:#fff
    style H fill:#6ccb5f,stroke:#107c10,color:#fff
    style I fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
                <thead>
                  <tr>
                    <th>Fonctionnalit√©</th>
                    <th>Statut</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="feature-name">Affichage date et salutation</td>
                    <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                    <td class="feature-desc">Bonjour/Bon apr√®s-midi/Bonsoir + nom utilisateur</td>
                  </tr>
                  <tr>
                    <td class="feature-name">Navigation vers modules</td>
                    <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                    <td class="feature-desc">Liens vers les 7 modules principaux</td>
                  </tr>
                  <tr>
                    <td class="feature-name">Nom utilisateur personnalis√©</td>
                    <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                    <td class="feature-desc">Configurable dans les param√®tres</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Tasks -->
            <section id="tasks" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">‚úÖ</span> Module : T√¢ches</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Gestion des t√¢ches avec organisation temporelle en colonnes (Aujourd'hui, En cours, √Ä venir, Lointain).
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[‚åò+N] --> B[Saisir<br/>titre +  emoji]
    B --> C[ü§ñ Auto<br/>d√©tection]
    C --> D[Cat√©gorie<br/>+ priorit√©]
    D --> E{Ajouter au<br/>projet?}
    E -->|Oui| F[S√©lectionner<br/>projet]
    E -->|Non| G[T√¢che<br/>seule]
    F --> H[Sugg√©rer<br/>colonne]
    G --> H
    H --> I{Ajouter<br/>sous-t√¢ches?}
    I -->|Oui| J[Cr√©er<br/>sous-t√¢ches]
    I -->|Non| K[‚úì T√¢che<br/>cr√©√©e]
    J --> K
    K -.->|Optionnel| L[‚è±Ô∏è Lancer<br/>Pomodoro]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style C fill:#b392f0,stroke:#8764b8,color:#fff
    style E fill:#ffc83d,stroke:#ffb900,color:#000
    style I fill:#ffc83d,stroke:#ffb900,color:#000
    style K fill:#6ccb5f,stroke:#107c10,color:#fff
    style L fill:#f85149,stroke:#d13438,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Vue en 4 colonnes temporelles</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Aujourd'hui, En cours, √Ä venir, Lointain</td>
              </tr>
              <tr>
                <td class="feature-name">Cr√©ation rapide (‚åòN)</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Raccourci clavier, saisie rapide</td>
              </tr>
              <tr>
                <td class="feature-name">Compl√©tion avec animation</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Toggle avec confetti optionnel</td>
              </tr>
              <tr>
                <td class="feature-name">T√¢che prioritaire unique</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Une seule t√¢che marqu√©e prioritaire</td>
              </tr>
              <tr>
                <td class="feature-name">Cat√©gorisation automatique</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">D√©tection depuis le titre</td>
              </tr>
              <tr>
                <td class="feature-name">Sous-t√¢ches</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Ajout/toggle/suppression</td>
              </tr>
              <tr>
                <td class="feature-name">Projets</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Regroupement avec couleur/ic√¥ne</td>
              </tr>
              <tr>
                <td class="feature-name">G√©n√©ration projet IA</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Analyse domaine ‚Üí comp√©tences ‚Üí plan</td>
              </tr>
              <tr>
                <td class="feature-name">Syst√®me de quota</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Limite t√¢ches visibles, d√©blocage auto</td>
              </tr>
              <tr>
                <td class="feature-name">Pomodoro int√©gr√©</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Onglet Focus avec timer</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Journal -->
            <section id="journal" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üìù</span> Module : Journal / Ma Journ√©e</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Espace de r√©flexion quotidienne combinant intention du jour, habitudes et notes libres.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üìù Ouvrir<br/>Journal] --> B[Intention<br/>du jour]
    B --> C[Premi√®re<br/>action]
    C --> D[S√©lection<br/>humeur]
    D --> E{Cocher<br/>habitudes?}
    E -->|Oui| F[Rituels<br/>quotidiens]
    E -->|Skip| G[Notes<br/>libres]
    F --> G
    G --> H[üíæ Auto-save<br/>3s]
    H --> I[‚úì Entr√©e<br/>sauvegard√©e]
    I -.-> J[üî• Streak<br/>mis √† jour]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style E fill:#ffc83d,stroke:#ffb900,color:#000
    style H fill:#b392f0,stroke:#8764b8,color:#fff
    style I fill:#6ccb5f,stroke:#107c10,color:#fff
    style J fill:#f85149,stroke:#d13438,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Intention du jour</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Objectif principal quotidien</td>
              </tr>
              <tr>
                <td class="feature-name">Premi√®re action</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Suggestion depuis t√¢che prioritaire</td>
              </tr>
              <tr>
                <td class="feature-name">S√©lection humeur</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">5 niveaux emoji (üò¢‚Üíü§©)</td>
              </tr>
              <tr>
                <td class="feature-name">Notes libres</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Zone de texte r√©flexions</td>
              </tr>
              <tr>
                <td class="feature-name">Auto-save</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Sauvegarde apr√®s 3s d'inactivit√©</td>
              </tr>
              <tr>
                <td class="feature-name">Habitudes/Rituels</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Liste cochable avec streaks</td>
              </tr>
              <tr>
                <td class="feature-name">Statistiques journal</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Streak, humeur moyenne, total</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Health -->
            <section id="health" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üíö</span> Module : Sant√©</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Suivi du poids, de la nutrition et de l'hydratation.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üíö Ouvrir<br/>Sant√©] --> B{Onglet?}
    B -->|Nutrition| C[Ajouter<br/>repas]
    B -->|Poids| D[Nouvelle<br/>pes√©e]
    C --> E[D√©tails<br/>calories + macros]
    D --> F[Poids +<br/>note]
    E --> G[üìä Total<br/>journalier]
    F --> H[üìà Graphique<br/>tendance]
    G --> I[‚úì Repas<br/>enregistr√©]
    H --> J[‚úì Pes√©e<br/>enregistr√©e]
    I -.-> K[Dupliquer<br/>repas?]
    J -.-> L[üí° Insight<br/>Brain]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style B fill:#ffc83d,stroke:#ffb900,color:#000
    style G fill:#b392f0,stroke:#8764b8,color:#fff
    style H fill:#b392f0,stroke:#8764b8,color:#fff
    style I fill:#6ccb5f,stroke:#107c10,color:#fff
    style J fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Ajout de repas</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Modal avec d√©tails nutritionnels</td>
              </tr>
              <tr>
                <td class="feature-name">Suivi calories</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Total journalier vs objectif</td>
              </tr>
              <tr>
                <td class="feature-name">Suivi macros</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Graphique circulaire P/G/L</td>
              </tr>
              <tr>
                <td class="feature-name">Duplication repas</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">R√©p√©ter un repas existant</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Learning -->
            <section id="learning" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üéì</span> Module : Apprentissage</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Plateforme d'apprentissage assist√©e par IA avec tuteur conversationnel.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üéì Cr√©er<br/>cours] --> B[Nom +<br/>description]
    B --> C[Niveau +<br/>sujets]
    C --> D[‚úì Cours<br/>cr√©√©]
    D --> E[üí¨ Ouvrir<br/>chat IA]
    E --> F[Poser<br/>question]
    F --> G[ü§ñ Gemini<br/>streaming]
    G --> H[R√©ponse<br/>progressive]
    H --> I{Action?}
    I -->|Continuer| F
    I -->|Code| J[Envoyer<br/>contexte code]
    I -->|Lier projet| K[Associer<br/>projet t√¢ches]
    J --> F
    K --> L[‚úì Cours li√©<br/>√† projet]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style G fill:#b392f0,stroke:#8764b8,color:#fff
    style I fill:#ffc83d,stroke:#ffb900,color:#000
    style D fill:#6ccb5f,stroke:#107c10,color:#fff
    style L fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Cr√©ation de cours</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Nom, description, niveau, sujets</td>
              </tr>
              <tr>
                <td class="feature-name">Chat IA tuteur</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Conversation avec Gemini AI</td>
              </tr>
              <tr>
                <td class="feature-name">Streaming r√©ponses</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Affichage progressif</td>
              </tr>
              <tr>
                <td class="feature-name">Contexte de code</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Envoi code pour analyse</td>
              </tr>
              <tr>
                <td class="feature-name">√âpinglage/Archivage</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Organisation des cours</td>
              </tr>
              <tr>
                <td class="feature-name">System prompt custom</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Personnalisation IA</td>
              </tr>
              <tr>
                <td class="feature-name">Lien cours ‚Üî projet</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Association t√¢ches</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Pomodoro -->
            <section id="pomodoro" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üçÖ</span> Module : Pomodoro</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Timer de focus bas√© sur la technique Pomodoro, int√©gr√© aux t√¢ches et √† l'apprentissage.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[‚è±Ô∏è Depuis<br/>t√¢che/cours] --> B[Choisir<br/>dur√©e]
    B --> C[‚ñ∂ D√©marrer<br/>25 min]
    C --> D[Timer<br/>actif]
    D --> E[üîï Mode<br/>focus]
    E --> F[‚è∞ Fin<br/>session]
    F --> G{Faire<br/>pause?}
    G -->|Oui| H[‚è∏Ô∏è Pause<br/>5 min]
    G -->|Non| I[‚úì Session<br/>compl√©t√©e]
    H --> J{Continuer?}
    J -->|Oui| C
    J -->|Non| I
    I --> K[üìä Stats<br/>mises √† jour]
    K -.-> L[üîî Notification]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style E fill:#b392f0,stroke:#8764b8,color:#fff
    style G fill:#ffc83d,stroke:#ffb900,color:#000
    style J fill:#ffc83d,stroke:#ffb900,color:#000
    style I fill:#6ccb5f,stroke:#107c10,color:#fff
    style L fill:#f85149,stroke:#d13438,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Timer circulaire</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Affichage visuel temps restant</td>
              </tr>
              <tr>
                <td class="feature-name">Dur√©es pr√©r√©gl√©es</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">15, 25, 30, 45, 60 min</td>
              </tr>
              <tr>
                <td class="feature-name">Liaison t√¢che</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Associer √† une t√¢che</td>
              </tr>
              <tr>
                <td class="feature-name">Liaison projet</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Associer √† un projet</td>
              </tr>
              <tr>
                <td class="feature-name">Liaison livre</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Temps de lecture</td>
              </tr>
              <tr>
                <td class="feature-name">Liaison cours</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Temps d'√©tude</td>
              </tr>
              <tr>
                <td class="feature-name">Sons & Notifications</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Volume r√©glable</td>
              </tr>
              <tr>
                <td class="feature-name">Titre dynamique</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Temps dans l'onglet</td>
              </tr>
              <tr>
                <td class="feature-name">Raccourcis clavier</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Espace, R</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Library -->
            <section id="library" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üìö</span> Module : Biblioth√®que</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Gestion de la biblioth√®que personnelle avec suivi de lecture.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üìö Ajouter<br/>livre] --> B[Titre +<br/>auteur]
    B --> C[Pages +<br/>genre]
    C --> D[‚úì Livre<br/>ajout√©]
    D --> E[üìñ Lire<br/>maintenant]
    E --> F[‚è±Ô∏è Timer<br/>Pomodoro]
    F --> G[Lecture<br/>en cours]
    G --> H[Fin<br/>session]
    H --> I[Pages<br/>lues?]
    I --> J[Progression<br/>mise √† jour]
    J --> K{Actions?}
    K -->|Citation| L[üí¨ Ajouter<br/>citation]
    K -->|Note| M[üìù Ajouter<br/>note]
    K -->|Terminer| N[‚≠ê Noter<br/>livre]
    L --> O[‚úì Sauvegard√©]
    M --> O
    N --> O
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style F fill:#b392f0,stroke:#8764b8,color:#fff
    style K fill:#ffc83d,stroke:#ffb900,color:#000
    style O fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Gestion livres</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Ajout, √©dition, suppression</td>
              </tr>
              <tr>
                <td class="feature-name">Statuts lecture</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">√Ä lire, En cours, Termin√©</td>
              </tr>
              <tr>
                <td class="feature-name">Progression pages</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Page actuelle / total</td>
              </tr>
              <tr>
                <td class="feature-name">Sessions lecture</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Timer avec dur√©e</td>
              </tr>
              <tr>
                <td class="feature-name">Citations</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Ajout, √©dition, suppression</td>
              </tr>
              <tr>
                <td class="feature-name">Notes de lecture</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Notes par livre</td>
              </tr>
              <tr>
                <td class="feature-name">Objectif annuel</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Nombre de livres/an</td>
              </tr>
              <tr>
                <td class="feature-name">Export/Import</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">JSON + Citations MD</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Dashboard -->
            <section id="dashboard" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üìà</span> Module : Dashboard</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Vue d'ensemble des indicateurs de continuit√© et tendances globales.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üìà Ouvrir<br/>Dashboard] --> B[√âtats du<br/>jour]
    B --> C[S√©ries de<br/>consistance]
    C --> D{Cliquer<br/>streak?}
    D -->|Oui| E[üìä D√©tail<br/>m√©trique]
    D -->|Non| F[Graphiques<br/>7 jours]
    E --> G[Historique<br/>complet]
    F --> H[T√¢ches +<br/>Focus]
    G --> I[üí° Corr√©lations]
    H --> I
    I --> J[Humeur ‚Üî<br/>Habitudes]
    J --> K[Productivit√© ‚Üî<br/>Pomodoro]
    K --> L[‚úì Insights<br/>consult√©s]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style D fill:#ffc83d,stroke:#ffb900,color:#000
    style I fill:#b392f0,stroke:#8764b8,color:#fff
    style L fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">√âtats du jour</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Actif/Inactif par module</td>
              </tr>
              <tr>
                <td class="feature-name">S√©ries de consistance</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">6 streaks affich√©s</td>
              </tr>
              <tr>
                <td class="feature-name">Indicateur continuit√©</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Forte/Partielle/Faible</td>
              </tr>
              <tr>
                <td class="feature-name">Graphiques 7 jours</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">T√¢ches + Focus</td>
              </tr>
              <tr>
                <td class="feature-name">Corr√©lations</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Humeur‚ÜîHabitudes, Productivit√©‚ÜîPomodoro</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Settings -->
            <section id="settings" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">‚öôÔ∏è</span> Module : Param√®tres</h2>
          <span class="badge badge-success">‚úÖ Complet</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Configuration de l'application et gestion des donn√©es.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[‚öôÔ∏è Ouvrir<br/>Param√®tres] --> B{Section?}
    B -->|Apparence| C[Couleur<br/>d'accent]
    B -->|Donn√©es| D[Export/<br/>Import]
    B -->|Avanc√©| E[Toggle<br/>animations]
    C --> F[4 choix<br/>couleurs]
    D --> G{Action?}
    E --> H[Confettis<br/>ON/OFF]
    F --> I[‚úì Th√®me<br/>appliqu√©]
    G -->|Export| J[üì• Download<br/>JSON]
    G -->|Import| K[üì§ Upload<br/>JSON]
    G -->|Reset| L[‚ö†Ô∏è Confirmation]
    H --> I
    J --> I
    K --> M[‚úì Donn√©es<br/>restaur√©es]
    L --> N[üí• Reset<br/>complet]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style B fill:#ffc83d,stroke:#ffb900,color:#000
    style G fill:#ffc83d,stroke:#ffb900,color:#000
    style I fill:#6ccb5f,stroke:#107c10,color:#fff
    style M fill:#6ccb5f,stroke:#107c10,color:#fff
    style N fill:#f85149,stroke:#d13438,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Mode sombre</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Toggle (fixe sombre actuellement)</td>
              </tr>
              <tr>
                <td class="feature-name">Couleur d'accent</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">4 choix : Indigo, Violet, Cyan, √âmeraude</td>
              </tr>
              <tr>
                <td class="feature-name">Toggle animations</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Activer/d√©sactiver</td>
              </tr>
              <tr>
                <td class="feature-name">Export JSON</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">T√©l√©chargement donn√©es</td>
              </tr>
              <tr>
                <td class="feature-name">Import JSON</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Restauration fichier</td>
              </tr>
              <tr>
                <td class="feature-name">R√©initialisation</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Suppression compl√®te avec confirmation</td>
              </tr>
              <tr>
                <td class="feature-name">Toggle confettis</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">D√©sactiv√© par d√©faut</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Brain -->
            <section id="brain" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üß†</span> Cerveau Algorithmique (Brain)</h2>
          <span class="badge badge-warning">üîÑ Partiel</span>
        </div>
        <div class="content-body">
          <p style="margin-bottom: 20px; color: var(--gray-500);">
            <strong>R√¥le :</strong> Syst√®me d'observation et d'analyse comportementale pour suggestions bienveillantes.
          </p>

          <!-- Flow diagram - visible -->
          <div class="flow-chart-display">
            <div class="flow-zoom-controls">
              <button class="flow-zoom-btn" onclick="zoomFlow(this, -0.2)">‚àí</button>
              <span class="flow-zoom-level">100%</span>
              <button class="flow-zoom-btn" onclick="zoomFlow(this, 0.2)">+</button>
              <button class="flow-zoom-btn" onclick="resetZoom(this)">‚ü≤</button>
            </div>
            <div class="mermaid">
graph LR
    A[üß† Brain<br/>actif] --> B[üëÅÔ∏è Observer<br/>actions]
    B --> C[T√¢ches<br/>compl√©t√©es]
    B --> D[Sessions<br/>Pomodoro]
    B --> E[Humeur<br/>journal]
    C --> F[üíæ M√©moire<br/>7 jours]
    D --> F
    E --> F
    F --> G[üîç Analyse<br/>patterns]
    G --> H[Heures<br/>productives]
    G --> I[Corr√©lations<br/>d√©tect√©es]
    H --> J[üí° Pr√©dictions]
    I --> J
    J --> K[Bon moment<br/>travail?]
    J --> L[Risque<br/>procrastination?]
    K --> M[‚ú® Suggestions<br/>bienveillantes]
    L --> M
    M --> N[üìä Score<br/>bien-√™tre]
    
    style A fill:#4a9eff,stroke:#0078d4,color:#fff
    style B fill:#b392f0,stroke:#8764b8,color:#fff
    style G fill:#b392f0,stroke:#8764b8,color:#fff
    style J fill:#ffc83d,stroke:#ffb900,color:#000
    style M fill:#6ccb5f,stroke:#107c10,color:#fff
            </div>
          </div>

          <!-- Features accordion -->
          <details class="feature-accordion">
            <summary class="accordion-header">
              <span class="accordion-icon">üìã</span>
              <span class="accordion-title">Fonctionnalit√©s d√©taill√©es</span>
              <span class="accordion-toggle">‚ñº</span>
            </summary>
            <div class="accordion-content">
              <table class="feature-table">
            <thead>
              <tr>
                <th>Fonctionnalit√©</th>
                <th>Statut</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="feature-name">Observation √©v√©nements</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Collecte silencieuse des actions</td>
              </tr>
              <tr>
                <td class="feature-name">M√©moire persistante</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">7 derniers jours</td>
              </tr>
              <tr>
                <td class="feature-name">Analyse patterns</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Heures productives, habitudes, corr√©lations</td>
              </tr>
              <tr>
                <td class="feature-name">Pr√©dictions</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Moment travail, risque procrastination</td>
              </tr>
              <tr>
                <td class="feature-name">Suggestions</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">Messages bienveillants</td>
              </tr>
              <tr>
                <td class="feature-name">Score bien-√™tre</td>
                <td><span class="badge badge-success">‚úÖ Impl√©ment√©</span></td>
                <td class="feature-desc">0-100 (productivit√© + sant√© + mental + constance)</td>
              </tr>
              <tr>
                <td class="feature-name">Widget UI Hub</td>
                <td><span class="badge badge-info">üìã √Ä faire</span></td>
                <td class="feature-desc">Affichage suggestions sur le Hub</td>
              </tr>
            </tbody>
          </table>
            </div>
          </details>
        </div>
      </section>

      <!-- Architecture -->
      <section id="architecture" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üèóÔ∏è</span> Architecture technique</h2>
        </div>
        <div class="content-body">
          <div class="arch-diagram">
            <div class="arch-layer">
              <div class="arch-layer-label">Frontend</div>
              <div class="arch-layer-content">
                <div class="arch-box primary">React 18</div>
                <div class="arch-box">TypeScript</div>
                <div class="arch-box">Tailwind CSS</div>
                <div class="arch-box">Vite</div>
              </div>
            </div>
            
            <div class="arch-arrow">‚Üì</div>
            
            <div class="arch-layer">
              <div class="arch-layer-label">State</div>
              <div class="arch-layer-content">
                <div class="arch-box primary">Zustand</div>
                <div class="arch-box">persist middleware</div>
                <div class="arch-box">localStorage</div>
              </div>
            </div>
            
            <div class="arch-arrow">‚Üì</div>
            
            <div class="arch-layer">
              <div class="arch-layer-label">Services</div>
              <div class="arch-layer-content">
                <div class="arch-box">Gemini AI (Google)</div>
                <div class="arch-box">FastAPI (Python)</div>
              </div>
            </div>
            
            <div class="arch-arrow">‚Üì</div>
            
            <div class="arch-layer">
              <div class="arch-layer-label">Desktop</div>
              <div class="arch-layer-content">
                <div class="arch-box">Tauri (optionnel)</div>
                <div class="arch-box">PWA</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Summary -->
      <section id="summary" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üìä</span> R√©sum√© des modules v1</h2>
        </div>
        <div class="content-body">
          <table class="summary-table">
            <thead>
              <tr>
                <th>Module</th>
                <th>Statut</th>
                <th>Fonctionnalit√©s cl√©s</th>
                <th>Progression</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üè†</span>
                    <span>Hub</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Navigation, salutation</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">‚úÖ</span>
                    <span>T√¢ches</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Colonnes temporelles, projets, g√©n√©ration IA</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üìù</span>
                    <span>Journal</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Intention, habitudes, humeur</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üíö</span>
                    <span>Sant√©</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Poids, nutrition, macros</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üéì</span>
                    <span>Apprentissage</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Chat IA tuteur, cours</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üçÖ</span>
                    <span>Pomodoro</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Timer, liaisons, historique</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üìö</span>
                    <span>Biblioth√®que</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Livres, citations, sessions</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üìà</span>
                    <span>Dashboard</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Streaks, corr√©lations</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">‚öôÔ∏è</span>
                    <span>Param√®tres</span>
                  </div>
                </td>
                <td><span class="badge badge-success">‚úÖ Complet</span></td>
                <td>Th√®me, export/import</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%"></div></div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="summary-module">
                    <span class="summary-module-icon">üß†</span>
                    <span>Brain</span>
                  </div>
                </td>
                <td><span class="badge badge-warning">üîÑ Partiel</span></td>
                <td>Backend OK, UI √† int√©grer</td>
                <td>
                  <div class="progress-bar"><div class="progress-bar-fill" style="width: 85%"></div></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Glossary -->
      <!-- Changelog -->
      <section id="changelog" class="content-card fade-in">
        <div class="content-header">
          <h2><span class="icon">üìù</span> Changelog</h2>
        </div>
        <div class="content-body">
          <div style="border-left: 3px solid var(--primary); padding-left: 20px;">
            <div style="margin-bottom: 32px;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="version-badge">v1.0.0</span>
                <span style="color: var(--gray-400); font-size: 13px;">20 D√©cembre 2024</span>
              </div>
              <h4 style="color: var(--gray-700); margin-bottom: 12px;">üéâ Release initiale</h4>
              <ul style="color: var(--gray-500); font-size: 14px; line-height: 1.8;">
                <li>9 modules fonctionnels complets</li>
                <li>Syst√®me de t√¢ches avec colonnes temporelles</li>
                <li>Journal quotidien avec habitudes et streaks</li>
                <li>Suivi sant√© (nutrition, poids, macros)</li>
                <li>Apprentissage avec chat IA (Gemini)</li>
                <li>Timer Pomodoro avec liaisons multiples</li>
                <li>Biblioth√®que personnelle avec citations</li>
                <li>Dashboard avec corr√©lations statistiques</li>
                <li>Brain algorithmique (backend fonctionnel)</li>
                <li>PWA installable avec mode hors-ligne</li>
                <li>Export/Import des donn√©es en JSON</li>
              </ul>
            </div>

            <div style="margin-bottom: 32px;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="badge badge-info">Document√©</span>
                <span style="color: var(--gray-400); font-size: 13px;">20 D√©cembre 2024</span>
              </div>
              <h4 style="color: var(--gray-700); margin-bottom: 12px;">üìã Documentation produit</h4>
              <ul style="color: var(--gray-500); font-size: 14px; line-height: 1.8;">
                <li>Cr√©ation du document de r√©f√©rence v1</li>
                <li>Documentation exhaustive des 9 modules</li>
                <li>D√©finition du p√©rim√®tre fonctionnel</li>
                <li>Liste des exclusions v1 explicites</li>
                <li>Architecture technique document√©e</li>
                <li>Version HTML interactive avec recherche</li>
                <li>Dark mode automatique</li>
                <li>Export PDF optimis√©</li>
                <li>Glossaire des termes cl√©s</li>
                <li>Liens vers le code source</li>
              </ul>
            </div>

            <div style="opacity: 0.6;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <span class="badge badge-warning">Planifi√©</span>
                <span style="color: var(--gray-400); font-size: 13px;">Q1 2025</span>
              </div>
              <h4 style="color: var(--gray-700); margin-bottom: 12px;">üîÆ v1.1 - Prochaines √©tapes</h4>
              <ul style="color: var(--gray-500); font-size: 14px; line-height: 1.8;">
                <li>Int√©gration UI du Brain sur le Hub</li>
                <li>R√©currence de t√¢ches</li>
                <li>Vue calendrier des t√¢ches</li>
                <li>Flashcards UI expos√©e</li>
                <li>Th√®me clair complet</li>
                <li>Statistiques hebdomadaires/mensuelles √©tendues</li>
                <li>Export des t√¢ches et journal</li>
                <li>Recherche dans le journal</li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-title">üìã Document de R√©f√©rence Produit ‚Äî NewMars v1</div>
      <div class="footer-text">
        Ce document est la source de v√©rit√© pour le p√©rim√®tre fonctionnel de NewMars v1.<br>
        Derni√®re mise √† jour : D√©cembre 2024
      </div>
    </div>
  </footer>

  <script>
    // ========== SEARCH FUNCTIONALITY ==========
    const searchInput = document.getElementById('searchInput');
    const searchClear = document.getElementById('searchClear');
    const searchResults = document.getElementById('searchResults');

    // Build search index
    const searchIndex = [];
    document.querySelectorAll('section').forEach(section => {
      const sectionId = section.getAttribute('id');
      const sectionTitle = section.querySelector('h2')?.textContent || '';
      const sectionContent = section.textContent;
      
      searchIndex.push({
        id: sectionId,
        title: sectionTitle,
        content: sectionContent,
        element: section
      });
    });

    function performSearch(query) {
      if (!query || query.length < 2) {
        searchResults.classList.remove('visible');
        return;
      }

      const results = searchIndex
        .map(item => {
          const titleMatch = item.title.toLowerCase().indexOf(query.toLowerCase());
          const contentMatch = item.content.toLowerCase().indexOf(query.toLowerCase());
          
          if (titleMatch !== -1 || contentMatch !== -1) {
            // Get context around match
            const contextStart = Math.max(0, contentMatch - 60);
            const contextEnd = Math.min(item.content.length, contentMatch + 60);
            const context = item.content.substring(contextStart, contextEnd);
            
            return {
              ...item,
              relevance: titleMatch !== -1 ? 100 : 50,
              context: context.replace(new RegExp(`(${query})`, 'gi'), '<span class="search-highlight">$1</span>')
            };
          }
          return null;
        })
        .filter(Boolean)
        .sort((a, b) => b.relevance - a.relevance)
        .slice(0, 8);

      if (results.length === 0) {
        searchResults.innerHTML = '<div class="search-result-item"><div class="search-result-context">Aucun r√©sultat trouv√©</div></div>';
      } else {
        searchResults.innerHTML = results.map(result => `
          <div class="search-result-item" onclick="navigateToSection('${result.id}')">
            <div class="search-result-title">${result.title}</div>
            <div class="search-result-context">...${result.context}...</div>
          </div>
        `).join('');
      }
      
      searchResults.classList.add('visible');
    }

    function navigateToSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
        searchResults.classList.remove('visible');
        searchInput.value = '';
        searchClear.classList.remove('visible');
        
        // Highlight section briefly
        section.style.transition = 'background 0.5s';
        section.style.background = 'var(--primary-light)';
        setTimeout(() => {
          section.style.background = '';
        }, 1500);
      }
    }

    searchInput.addEventListener('input', (e) => {
      const query = e.target.value;
      searchClear.classList.toggle('visible', query.length > 0);
      performSearch(query);
    });

    searchClear.addEventListener('click', () => {
      searchInput.value = '';
      searchClear.classList.remove('visible');
      searchResults.classList.remove('visible');
      searchInput.focus();
    });

    // Close search results when clicking outside
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.search-box')) {
        searchResults.classList.remove('visible');
      }
    });

    // Keyboard shortcut: Ctrl/Cmd + K to focus search
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        searchInput.focus();
      }
    });

    // ========== MOBILE HAMBURGER MENU ==========
    const hamburgerMenu = document.getElementById('hamburgerMenu');
    const sidebar = document.querySelector('.sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    // Show hamburger on mobile
    function checkMobile() {
      if (window.innerWidth <= 1024) {
        hamburgerMenu.style.display = 'flex';
      } else {
        hamburgerMenu.style.display = 'none';
        sidebar.classList.remove('open');
        sidebarOverlay.classList.remove('visible');
      }
    }

    checkMobile();
    window.addEventListener('resize', checkMobile);

    hamburgerMenu.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('visible');
      hamburgerMenu.classList.toggle('open');
    });

    sidebarOverlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      sidebarOverlay.classList.remove('visible');
      hamburgerMenu.classList.remove('open');
    });

    // Close sidebar when clicking a link on mobile
    
    });

    // ========== SMOOTH SCROLL & NAVIGATION ==========
    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
          
          // Update active states
          
    });

    // ========== INTERSECTION OBSERVER FOR ACTIVE LINKS ==========
    const sections = document.querySelectorAll('section[id]');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          
        }
      });
    }, { threshold: 0.3, rootMargin: '-200px 0px -50% 0px' });

    sections.forEach(section => observer.observe(section));

    // ========== MAKE FILE NAMES CLICKABLE ==========
    // GitHub repository base URL (update this to your actual repo)
    const GITHUB_REPO = 'https://github.com/yourusername/newmars/blob/main';
    
    // Find all code-like file references and make them clickable
    document.querySelectorAll('.feature-desc, .module-card-desc, p').forEach(element => {
      element.innerHTML = element.innerHTML.replace(
        /\b([A-Z][a-zA-Z0-9]*\.tsx?|[a-z]+\/[A-Z][a-zA-Z0-9]*\.tsx?)\b/g,
        `<a href="${GITHUB_REPO}/$1" target="_blank" class="file-link" title="Voir le code source">$1</a>`
      );
    });

    // ========== ACCESSIBILITY ENHANCEMENTS ==========
    // Add ARIA labels to interactive elements
    document.querySelectorAll('.module-card, .flow-node').forEach(card => {
      const title = card.querySelector('.module-card-title, .flow-node-label')?.textContent;
      if (title && !card.getAttribute('aria-label')) {
        card.setAttribute('aria-label', `Module ${title}`);
      }
    });

    // ========== SCROLL TO TOP BUTTON ==========
    const scrollBtn = document.createElement('button');
    scrollBtn.innerHTML = '‚Üë';
    scrollBtn.className = 'scroll-to-top';
    scrollBtn.setAttribute('aria-label', 'Retour en haut');
    scrollBtn.style.cssText = `
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      opacity: 0;
      transition: opacity 0.3s, transform 0.2s;
      z-index: 150;
    `;
    document.body.appendChild(scrollBtn);

    window.addEventListener('scroll', () => {
      if (window.scrollY > 500) {
        scrollBtn.style.opacity = '1';
      } else {
        scrollBtn.style.opacity = '0';
      }
    });

    scrollBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    scrollBtn.addEventListener('mouseenter', () => {
      scrollBtn.style.transform = 'scale(1.1)';
    });

    scrollBtn.addEventListener('mouseleave', () => {
      scrollBtn.style.transform = 'scale(1)';
    });

    // ========== PRINT OPTIMIZATION ==========
    window.addEventListener('beforeprint', () => {
      document.querySelectorAll('details').forEach(detail => {
        detail.setAttribute('open', '');
      });
    });

    // ========== ANALYTICS (Optional) ==========
    // Track section views
    const sectionViews = {};
    const viewObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          sectionViews[id] = (sectionViews[id] || 0) + 1;
        }
      });
    }, { threshold: 0.5 });

    sections.forEach(section => viewObserver.observe(section));

    // Log on page unload (for analytics)
    window.addEventListener('beforeunload', () => {
      console.log('Document sections viewed:', sectionViews);
    });

    // ========== FLOW MODAL FUNCTIONALITY ==========
    let currentZoom = 1;
    let isDragging = false;
    let startX, startY, scrollLeft, scrollTop;
    // Modal JavaScript removed - flows are now inline
    // ========== INTERACTIVE FLOW DIAGRAMS ==========
    
    // Initialize all flow diagrams with zoom/pan functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Wait for Mermaid to render
      setTimeout(() => {
        const flowDisplays = document.querySelectorAll('.flow-chart-display');
        
        flowDisplays.forEach(container => {
          const mermaidDiv = container.querySelector('.mermaid');
          
          // Check if mermaid has rendered
          if (!mermaidDiv || !mermaidDiv.querySelector('svg')) {
            console.warn('Mermaid not rendered yet for:', container);
            return;
          }
          
          let scale = 1;
          let posX = 0;
          let posY = 0;
          let isDragging = false;
          let startX, startY;
          
          // Store state
          container.dataset.scale = '1';
          container.dataset.posX = '0';
          container.dataset.posY = '0';
          
          // Update transform
          const updateTransform = () => {
            mermaidDiv.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
          };
          
          // Pan functionality
          container.addEventListener('mousedown', (e) => {
            // Don't drag if clicking on zoom buttons
            if (e.target.closest('.flow-zoom-controls')) return;
            
            isDragging = true;
            container.style.cursor = 'grabbing';
            startX = e.clientX - posX;
            startY = e.clientY - posY;
            e.preventDefault();
          });
          
          const stopDragging = () => {
            if (isDragging) {
              isDragging = false;
              container.style.cursor = 'grab';
            }
          };
          
          document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            posX = e.clientX - startX;
            posY = e.clientY - startY;
            container.dataset.posX = posX.toString();
            container.dataset.posY = posY.toString();
            updateTransform();
          });
          
          document.addEventListener('mouseup', stopDragging);
          container.addEventListener('mouseleave', stopDragging);
          
          // Zoom with mouse wheel
          container.addEventListener('wheel', (e) => {
            e.preventDefault();
            const delta = e.deltaY > 0 ? -0.1 : 0.1;
            scale = Math.max(0.3, Math.min(3, scale + delta));
            container.dataset.scale = scale.toString();
            updateTransform();
            
            // Update zoom level display
            const zoomLevel = container.querySelector('.flow-zoom-level');
            if (zoomLevel) {
              zoomLevel.textContent = Math.round(scale * 100) + '%';
            }
          }, { passive: false });
          
          console.log('‚úÖ Interactive flow initialized');
        });
      }, 1000); // Increased wait time for Mermaid
    });
    
    // Zoom button functions
    function zoomFlow(button, delta) {
      const container = button.closest('.flow-chart-display');
      const mermaidDiv = container.querySelector('.mermaid');
      const zoomLevel = container.querySelector('.flow-zoom-level');
      
      let scale = parseFloat(container.dataset.scale || 1);
      scale = Math.max(0.3, Math.min(3, scale + delta));
      container.dataset.scale = scale.toString();
      
      const posX = parseFloat(container.dataset.posX || 0);
      const posY = parseFloat(container.dataset.posY || 0);
      mermaidDiv.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
      zoomLevel.textContent = Math.round(scale * 100) + '%';
    }
    
    function resetZoom(button) {
      const container = button.closest('.flow-chart-display');
      const mermaidDiv = container.querySelector('.mermaid');
      const zoomLevel = container.querySelector('.flow-zoom-level');
      
      container.dataset.scale = '1';
      container.dataset.posX = '0';
      container.dataset.posY = '0';
      mermaidDiv.style.transform = 'translate(0px, 0px) scale(1)';
      zoomLevel.textContent = '100%';
    }

    console.log('‚úÖ NewMars Product Reference Document v1.0.0 loaded');
    console.log('üîÑ Interactive flow diagrams with zoom/pan enabled');
    console.log('üìù Press Ctrl/Cmd+K to search');
  </script>
</body>
</html>

